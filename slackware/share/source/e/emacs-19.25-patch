From peter@ifm.liu.se Thu Jul  7 16:27:42 PDT 1994
Article: 10815 of comp.os.linux.admin
Path: well!nigel.msen.com!spool.mu.edu!howland.reston.ans.net!EU.net!sunic!columba.udac.uu.se!populus.slu.se!news.ifm.liu.se!peter
From: peter@ifm.liu.se (Peter Eriksson)
Newsgroups: comp.os.linux.admin
Subject: Re: Emacs 19.25 & 8-bit characters....
Date: 7 Jul 1994 22:43:17 GMT
Lines: 97
Message-ID: <2vi0e5$aga@newsy.ifm.liu.se>
References: <TRONDMY.94Jul7162911@fys120.uio.no>
NNTP-Posting-Host: superman.ifm.liu.se

trondmy@fys120.uio.no (Trond Myklebust) writes:

>Has anybody managed to get 'standard-display-european' mode to work
>properly on Emacs 19.25 (it worked fine on v19.22) ?

Yes. If you apply this patch (it also fixes another bug with
suspending it (atleast on some Unixes)

/Peter

*** emacs.c.orig	Sat May 28 06:44:47 1994
--- emacs.c	Mon Jun 20 17:40:21 1994
***************
*** 409,429 ****
  
    clearerr (stdin);
  
-   if (! noninteractive1)
-     {
- #ifdef BSD_PGRPS
-       if (initialized)
- 	{
- 	  inherited_pgroup = EMACS_GETPGRP (0);
- 	  setpgrp (0, getpid ());
- 	}
- #else
- #if defined (USG5) && defined (INTERRUPT_INPUT)
-       setpgrp ();
- #endif
- #endif
-     }
- 
  #ifdef APOLLO
  #ifndef APOLLO_SR10
    /* If USE_DOMAIN_ACLS environment variable exists,
--- 409,414 ----
***************
*** 506,511 ****
--- 491,511 ----
        skip_args += 1;
        noninteractive = 1;
      }
+ 
+   if (! noninteractive)
+     {
+ #ifdef BSD_PGRPS
+       if (initialized)
+ 	{
+ 	  inherited_pgroup = EMACS_GETPGRP (0);
+ 	  setpgrp (0, getpid ());
+ 	}
+ #else
+ #if defined (USG5) && defined (INTERRUPT_INPUT)
+       setpgrp ();
+ #endif
+ #endif
+     }
  
  #ifdef POSIX_SIGNALS
    init_signals ();
*** keyboard.c.orig	Mon May 30 13:02:53 1994
--- keyboard.c	Mon Jun 20 17:40:16 1994
***************
*** 1162,1174 ****
  			  Lisp_Object obj;
  
  			  obj = DISP_CHAR_VECTOR (dp, lose);
! 			  if (NILP (obj)
! 			      || (XTYPE (obj) == Lisp_Vector
! 				  && XVECTOR (obj)->size == 1
! 				  && (XTYPE (obj = XVECTOR (obj)->contents[0])
! 				      == Lisp_Int)
! 				  /* Insist face not specified in glyph.  */
! 				  && (XINT (obj) & ((-1) << 8)) == 0))
  			    no_redisplay
  			      = direct_output_for_insert (XINT (obj));
  			}
--- 1162,1175 ----
  			  Lisp_Object obj;
  
  			  obj = DISP_CHAR_VECTOR (dp, lose);
! 			  if (NILP (obj))
! 			    no_redisplay = direct_output_for_insert (lose);
! 			  else if (XTYPE (obj) == Lisp_Vector
! 				   && XVECTOR (obj)->size == 1
! 				   && (XTYPE (obj = XVECTOR (obj)->contents[0])
! 				       == Lisp_Int)
! 				   /* Insist face not specified in glyph.  */
! 				   && (XINT (obj) & ((-1) << 8)) == 0)
  			    no_redisplay
  			      = direct_output_for_insert (XINT (obj));
  			}

--
Peter Eriksson <peter@ifm.liu.se>		Linköping University,
Systems Administrator				Department of Physics, 
Phone: +46 13 282786	(Fax: +46 13 137568)	S-581 83 Linköping, Sweden


