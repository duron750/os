NOTE: If you miss ONE LINE in this documentation, this library may not
      work for you.

Hi, Guys,

This is the beta release of the Linux C library 4.5.26. You have to
run the kernel and install the source code of 0.99 pl 15g or above to
use it.  You also need gcc 2.5.7 or above to use it.

If your kernel is older than specified, you should install libc 4.5.26
as well as the suitable gcc to compile the new kernel with them first.
While compiling the new kernel, your system should have as few
processes running as possible since some of them may be broken with
libc 4.5.26 and the old kernel. FYI, the compiler stuff should work
with 0.99 pl 13 or above.

You can get this package under pub/linux/packages/GCC/private/dontuse
from tsx-11.mit.edu. The file names are inc-4.5.26.tar.gz,
inc-4.5.25-4.5.26.tar.gz, libc-4.5.26.tar.gz, libc-4.5.25-4.5.26.tar.gz,
image-4.5.26.tar.gz and extra-4.5.26.tar.gz.

In linux-binutils-1.0.tar.gz, there are a new ar, a new ld with
QMAGIC support, GNU make 3.70 and gas 2.2l. The source codes are under
pub/linux/packages/GCC/src. You need to do

	cd /usr/bin
	rm ld as

before untar linux-binutils-1.0.tar.gz under /. Otherwise, the
symbolic links may fail.

I only make i486 binary versions this time.

WARNING: PLEASE READ THEM OR DONT USE THIS LIBRARY.
 0)	The IPC call interface is changed. Please make sure DOSEMU
	works with the new shared library.
 1)	There are some massive changes to Makefiles and the file
	structures. Now you can do:

	./configure
	make
	make install

	to get everything compiled and installed. Please check it out.

	The support for m68k is almost completed.

	There are some bugs in gnu make 3.62 which prevents the
	successfull compliation. Please use gnu make 3.70 or above
	instead. I included one in linux-binutils-1.0.tar.gz.
 2)	The Linux C library 4.5.8 is very strict. It won't tolerate
	any bugs in your applications. So it has exposed the
	"fclose on the same file pointer twice" bugs in mailx
	and pdksh. If you find something is wrong when using libc
	4.5.8, please recompile it with -g and run gdb on it. You
	should set break points in _IO_fclose () and _IO_fopen (),
	then check if _IO_fclose () is called twice on the same
	file pointer.

	In 4.5.26, I tried to relax the stdio a little bit. "fclose on
	the same file pointer twice" may work if the memory used by
	the file pointer does not happen to have a valid stdio
	signature. Please check it out. But I discourage this practice.
 3)	In this release, iostream is removed from the Linux C library.
	That means all the previous C++ binaries using iostream linked
	with the shared library will break.
 4)	If you have /usr/lib/libgcc.sa and /usr/lib/libgcc.a, they must
	not be used with libc 4.5.26. You have to remove/backup
	/usr/lib/libgcc.*.
 5)	All binaries using "long long" output in iostream linked with
	the shared library may be broken.
 6)	inet_network () returns the network number and treats the
 	network address as

	a.b.c.d	(with each treated as 8-bits)
	a.b.c	(with each treated as 8-bits)
	a.b	(with each treated as 8 bits)
	a	(with a treated as 8 bits)
 7)	xdm may be miscompiled by early gcc. If it doesn't work with
	this libc. Try to recompile it with gcc 2.5.x (x >= 7) or
	contact Dave_Boyd@Sterling.COM for a working binary.
 8)	You need tools 2.10 to make the shared library, which can be
	ftped from tsx-11.mit.edu under pub/linux/packages/GCC/src.
 9)	ld.so 1.4.3 or above is also required by this release. It is on
	tsx-11.mit.edu under pub/linux/packages/GCC.
10)	_PATH_LASTLOG, _PATH_MAILDIR and WTMP_FILE have bee moved from
	/usr to /var. _PATH_SENDMAIL is changed to /usr/sbin/sendmail.
	be sure you make the appropriate symbolic links.

	You need to link /var/adm/utmp with /etc/utmp, /var/adm/lastlog
	with /etc/lastlog, /var/spool/mail with /usr/spool/mail, maybe
	/usr/lib/sendmail with /usr/sbin/sendmail.
11)	I am testing rx 0.03 from sed 2.03 used to replace regex 0.12.
	You have to recompile your applications to take the advantage
	of the fast regex. The old applications should work fine with
	the old regex in the shared image.

	Rx 0.03 is too buggy. I have sent an email to the author asking
	for new version. At the same time, the old GNU regex 0.12 is
	restored.
12)	Please remove /usr/include/shadow.h if you don't use the shadow
	password. I will try to add the shadow stuff after 4.5.xx
13)	A stdio bug is fixed. For fgets (), the buffer will be
	unchanged and NULL is returned  when the EOF is seen. Before
	that, the buffer was terminated by the null char, which
	violates the ANSI C standard. But some programs may rely on
	that bug.
14)	libm.so.x.y is moved back to /lib.
15)	A new system call, getpgid (),  is added. It requries the
	kernel 0.99 pl 15 or above.
16)	There is a new obstack.[hc]. Please check if it breaks any old
	binaries compiled with old obstack.h.
17)	You have to remove "#include <linux/unistd.h>" from
	<linux/timex.h>.
18)	Please check locale/*/Makefile for how to install the new
	locale stuff. I expect it will change.
19)	I changed login/getlogin.c and posix/cuserid.c. I hope they
	don't break anything.

This release is compressed with gzip 1.2.4.

Please read ChangeLog for details of the bug fixes and changes.

The file list:

1. inc-4.5.26.tar.gz

  REQUIRED. It is the header files for 4.5.26.

  cd /
  rm -f /usr/include/regex.h /usr/include/rx.h
  rm -f /usr/include/bsd/utmp.h
  gzip -dc inc-4.5.26.tar.gz | tar xvvSof -
  # Please be careful, I don't know what you have under /usr/include.
  # If you have a problem with the header files, you may do 
  #	rm -rf /usr/include
  #	mkdir -p /usr/include
  # before
  #	gzip -dc inc-4.5.26.tar.gz | tar xSvvof -

  The header files in inc-4.5.26.tar.gz are not complete. You have to
  install the kernel source for the rest of the header files. Please
  get the version mentioned at the beginning of this release note.
  Suppose you install the kernel source at "/foo/bar/src", you should
  do as root

  cd /usr/include
  ln -s /foo/bar/src/linux/include/asm .
  ln -s /foo/bar/src/linux/include/linux .
  
  Since some programs need <linux/autoconf.h>, you may have to do
			  
  cd /foo/bar/src/linux
  make config
			       
  before you can compile them.

2. inc-4.5.25-4.5.26.tar.gz
 
  Change of the header files from 4.5.25 to 4.5.26.
 
  cd /
  rm  -f /usr/include/regex.h /usr/include/rx.h
  rm -f /usr/include/bsd/utmp.h
  gzip -dc inc-4.5.25-4.5.26.tar.gz | tar xSvvof -

3. libc-4.5.26.tar.gz
 
  Source code for 4.5.26.
 
  cd src
  rm -rf libc-linux
  gzip -dc libc-4.5.26.tar.gz | tar xSvvof -
  rm libc-linux/nls/nl_types.h
  cd libc-linux/sysdeps/linux/i386
  rm syscall.c	# If it is there.

4. libc-4.5.25-4.5.26.tar.gz

  Change of the source code from 4.5.25 to 4.5.26.

  cd src
  gzip -dc libc-4.5.25-4.5.26.tar.gz | tar xSvvof -
  rm libc-linux/nls/nl_types.h
  cd libc-linux/sysdeps/linux/i386
  rm syscall.c	# If it is there.

5. image-4.5.26.tar.gz

  REQUIRED. The stub/static libraries and the shared images. To
  install it, as root do

  cd /
  gzip -dc image-4.5.26.tar.gz | tar xSvvof -
  ldconfig -v

6. extra-4.5.26.tar.gz
 
  REQUIRED. libmcheck.a, libg.a, libc_p.a, libgmon.a and gcrt0.o. To
  install

  cd /
  gzip -dc extra-4.5.26.tar.gz | tar xSvvof -

7. ChangeLog

  Change log for the Linux C library.

Please fix the file permissions after you install it.


H.J.
hjl@nynexst.com
04/04/94
-----
